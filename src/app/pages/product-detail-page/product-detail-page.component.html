<div class="page-container">

  <header class="page-header">
    @if (restaurantId) {
      <a class="back" [routerLink]="['/restaurants', restaurantId]">‚Üê Volver</a>
    } @else {
      <a class="back" routerLink="/restaurants">‚Üê Volver</a>
    }

    @if (restaurant) {
      <div class="header-info">
        <h2>{{ restaurant.restaurantName }}</h2>
        <p class="subtitle">üìç {{ restaurant.address }} ¬∑ üìû {{ restaurant.phoneNumber }}</p>
      </div>
    }
  </header>

  @if (isLoading) {
    <section class="card loading-state">
      <p>Cargando producto...</p>
    </section>
  }

  @if (!isLoading && errorMsg) {
    <section class="card empty-state">
      <h3>¬°Ups!</h3>
      <p>{{ errorMsg }}</p>
    </section>
  }

  @if (!isLoading && !errorMsg && product) {
    <main class="card product-card">
      <div class="top">
        <div class="left">
          <h3 class="title">{{ product.name }}</h3>

          <div class="badges">
            @if (isFeatured(product)) {
              <span class="badge badge-star">‚≠ê Destacado</span>
            }
            @if (discount(product) > 0) {
              <span class="badge badge-discount">{{ discount(product) }}% OFF</span>
            }
            @if (hasHappyHour(product)) {
              <span class="badge badge-ok">‚úÖ Happy Hour</span>
            }
          </div>

          @if (product.categoryName) {
            <p class="meta">Categor√≠a: <strong>{{ product.categoryName }}</strong></p>
          }
        </div>

        <div class="price">
          @if (discount(product) > 0) {
            <span class="old">${{ product.price }}</span>
            <span class="now">${{ finalPrice(product) }}</span>
          } @else {
            <span class="now">${{ product.price }}</span>
          }
        </div>
      </div>

      <section class="section">
        <h4>Descripci√≥n</h4>
        @if (product.description) {
          <p class="desc">{{ product.description }}</p>
        } @else {
          <p class="muted">Sin descripci√≥n.</p>
        }
      </section>

      <section class="section">
        <h4>Detalles</h4>

        <div class="details">
          <div class="row">
            <span class="k">ID</span>
            <span class="v">{{ product.id }}</span>
          </div>

          <div class="row">
            <span class="k">Precio base</span>
            <span class="v">${{ product.price }}</span>
          </div>

          <div class="row">
            <span class="k">Descuento</span>
            <span class="v">
              @if (discount(product) > 0) { {{ discount(product) }}% } @else { ‚Äî }
            </span>
          </div>

          <div class="row">
            <span class="k">Precio final</span>
            <span class="v">${{ finalPrice(product) }}</span>
          </div>

          <div class="row">
            <span class="k">Happy Hour</span>
            <span class="v">
              @if (hasHappyHour(product)) { Activo } @else { ‚Äî }
            </span>
          </div>

          <div class="row">
            <span class="k">Destacado</span>
            <span class="v">
              @if (isFeatured(product)) { S√≠ } @else { ‚Äî }
            </span>
          </div>
        </div>
      </section>
    </main>
  }

</div>
